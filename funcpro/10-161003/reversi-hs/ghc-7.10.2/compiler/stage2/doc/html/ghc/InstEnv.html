<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>InstEnv</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_InstEnv.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/InstEnv.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">ghc-7.10.2: The GHC API</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">InstEnv</p></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">type</span> <a href="#t:DFunId">DFunId</a> = <a href="Var.html#t:Id">Id</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:InstMatch">InstMatch</a> = (<a href="InstEnv.html#t:ClsInst">ClsInst</a>, [<a href="InstEnv.html#t:DFunInstType">DFunInstType</a>])</li><li class="src short"><span class="keyword">type</span> <a href="#t:ClsInstLookupResult">ClsInstLookupResult</a> = ([<a href="InstEnv.html#t:InstMatch">InstMatch</a>], [<a href="InstEnv.html#t:ClsInst">ClsInst</a>], <a href="../base-4.8.1.0/Data-Bool.html#t:Bool">Bool</a>)</li><li class="src short"><span class="keyword">data</span> <a href="#t:OverlapFlag">OverlapFlag</a> = <a href="#v:OverlapFlag">OverlapFlag</a> {<ul class="subs"><li><a href="#v:overlapMode">overlapMode</a> :: <a href="InstEnv.html#t:OverlapMode">OverlapMode</a></li><li><a href="#v:isSafeOverlap">isSafeOverlap</a> :: <a href="../base-4.8.1.0/Data-Bool.html#t:Bool">Bool</a></li></ul>}</li><li class="src short"><span class="keyword">data</span> <a href="#t:OverlapMode">OverlapMode</a><ul class="subs"><li>= <a href="#v:NoOverlap">NoOverlap</a> <a href="BasicTypes.html#t:SourceText">SourceText</a></li><li>| <a href="#v:Overlappable">Overlappable</a> <a href="BasicTypes.html#t:SourceText">SourceText</a></li><li>| <a href="#v:Overlapping">Overlapping</a> <a href="BasicTypes.html#t:SourceText">SourceText</a></li><li>| <a href="#v:Overlaps">Overlaps</a> <a href="BasicTypes.html#t:SourceText">SourceText</a></li><li>| <a href="#v:Incoherent">Incoherent</a> <a href="BasicTypes.html#t:SourceText">SourceText</a></li></ul></li><li class="src short"><a href="#v:setOverlapModeMaybe">setOverlapModeMaybe</a> :: <a href="InstEnv.html#t:OverlapFlag">OverlapFlag</a> -&gt; <a href="../base-4.8.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="InstEnv.html#t:OverlapMode">OverlapMode</a> -&gt; <a href="InstEnv.html#t:OverlapFlag">OverlapFlag</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:ClsInst">ClsInst</a> = <a href="#v:ClsInst">ClsInst</a> {<ul class="subs"><li><a href="#v:is_cls_nm">is_cls_nm</a> :: <a href="Name.html#t:Name">Name</a></li><li><a href="#v:is_tcs">is_tcs</a> :: [<a href="../base-4.8.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Name.html#t:Name">Name</a>]</li><li><a href="#v:is_tvs">is_tvs</a> :: [<a href="Var.html#t:TyVar">TyVar</a>]</li><li><a href="#v:is_cls">is_cls</a> :: <a href="Class.html#t:Class">Class</a></li><li><a href="#v:is_tys">is_tys</a> :: [<a href="Type.html#t:Type">Type</a>]</li><li><a href="#v:is_dfun">is_dfun</a> :: <a href="InstEnv.html#t:DFunId">DFunId</a></li><li><a href="#v:is_flag">is_flag</a> :: <a href="InstEnv.html#t:OverlapFlag">OverlapFlag</a></li><li><a href="#v:is_orphan">is_orphan</a> :: <a href="InstEnv.html#t:IsOrphan">IsOrphan</a></li></ul>}</li><li class="src short"><span class="keyword">type</span> <a href="#t:DFunInstType">DFunInstType</a> = <a href="../base-4.8.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Type.html#t:Type">Type</a></li><li class="src short"><a href="#v:pprInstance">pprInstance</a> :: <a href="InstEnv.html#t:ClsInst">ClsInst</a> -&gt; <a href="Outputable.html#t:SDoc">SDoc</a></li><li class="src short"><a href="#v:pprInstanceHdr">pprInstanceHdr</a> :: <a href="InstEnv.html#t:ClsInst">ClsInst</a> -&gt; <a href="Outputable.html#t:SDoc">SDoc</a></li><li class="src short"><a href="#v:pprInstances">pprInstances</a> :: [<a href="InstEnv.html#t:ClsInst">ClsInst</a>] -&gt; <a href="Outputable.html#t:SDoc">SDoc</a></li><li class="src short"><a href="#v:instanceHead">instanceHead</a> :: <a href="InstEnv.html#t:ClsInst">ClsInst</a> -&gt; ([<a href="Var.html#t:TyVar">TyVar</a>], <a href="Class.html#t:Class">Class</a>, [<a href="Type.html#t:Type">Type</a>])</li><li class="src short"><a href="#v:instanceSig">instanceSig</a> :: <a href="InstEnv.html#t:ClsInst">ClsInst</a> -&gt; ([<a href="Var.html#t:TyVar">TyVar</a>], [<a href="Type.html#t:Type">Type</a>], <a href="Class.html#t:Class">Class</a>, [<a href="Type.html#t:Type">Type</a>])</li><li class="src short"><a href="#v:mkLocalInstance">mkLocalInstance</a> :: <a href="InstEnv.html#t:DFunId">DFunId</a> -&gt; <a href="InstEnv.html#t:OverlapFlag">OverlapFlag</a> -&gt; [<a href="Var.html#t:TyVar">TyVar</a>] -&gt; <a href="Class.html#t:Class">Class</a> -&gt; [<a href="Type.html#t:Type">Type</a>] -&gt; <a href="InstEnv.html#t:ClsInst">ClsInst</a></li><li class="src short"><a href="#v:mkImportedInstance">mkImportedInstance</a> :: <a href="Name.html#t:Name">Name</a> -&gt; [<a href="../base-4.8.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Name.html#t:Name">Name</a>] -&gt; <a href="InstEnv.html#t:DFunId">DFunId</a> -&gt; <a href="InstEnv.html#t:OverlapFlag">OverlapFlag</a> -&gt; <a href="InstEnv.html#t:IsOrphan">IsOrphan</a> -&gt; <a href="InstEnv.html#t:ClsInst">ClsInst</a></li><li class="src short"><a href="#v:instanceDFunId">instanceDFunId</a> :: <a href="InstEnv.html#t:ClsInst">ClsInst</a> -&gt; <a href="InstEnv.html#t:DFunId">DFunId</a></li><li class="src short"><a href="#v:tidyClsInstDFun">tidyClsInstDFun</a> :: (<a href="InstEnv.html#t:DFunId">DFunId</a> -&gt; <a href="InstEnv.html#t:DFunId">DFunId</a>) -&gt; <a href="InstEnv.html#t:ClsInst">ClsInst</a> -&gt; <a href="InstEnv.html#t:ClsInst">ClsInst</a></li><li class="src short"><a href="#v:instanceRoughTcs">instanceRoughTcs</a> :: <a href="InstEnv.html#t:ClsInst">ClsInst</a> -&gt; [<a href="../base-4.8.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Name.html#t:Name">Name</a>]</li><li class="src short"><a href="#v:fuzzyClsInstCmp">fuzzyClsInstCmp</a> :: <a href="InstEnv.html#t:ClsInst">ClsInst</a> -&gt; <a href="InstEnv.html#t:ClsInst">ClsInst</a> -&gt; <a href="../base-4.8.1.0/Data-Ord.html#t:Ordering">Ordering</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:IsOrphan">IsOrphan</a><ul class="subs"><li>= <a href="#v:IsOrphan">IsOrphan</a></li><li>| <a href="#v:NotOrphan">NotOrphan</a> <a href="OccName.html#t:OccName">OccName</a></li></ul></li><li class="src short"><a href="#v:isOrphan">isOrphan</a> :: <a href="InstEnv.html#t:IsOrphan">IsOrphan</a> -&gt; <a href="../base-4.8.1.0/Data-Bool.html#t:Bool">Bool</a></li><li class="src short"><a href="#v:notOrphan">notOrphan</a> :: <a href="InstEnv.html#t:IsOrphan">IsOrphan</a> -&gt; <a href="../base-4.8.1.0/Data-Bool.html#t:Bool">Bool</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:InstEnvs">InstEnvs</a> = <a href="#v:InstEnvs">InstEnvs</a> {<ul class="subs"><li><a href="#v:ie_global">ie_global</a> :: <a href="InstEnv.html#t:InstEnv">InstEnv</a></li><li><a href="#v:ie_local">ie_local</a> :: <a href="InstEnv.html#t:InstEnv">InstEnv</a></li><li><a href="#v:ie_visible">ie_visible</a> :: <a href="InstEnv.html#t:VisibleOrphanModules">VisibleOrphanModules</a></li></ul>}</li><li class="src short"><span class="keyword">type</span> <a href="#t:VisibleOrphanModules">VisibleOrphanModules</a> = <a href="Module.html#t:ModuleSet">ModuleSet</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:InstEnv">InstEnv</a> = <a href="UniqFM.html#t:UniqFM">UniqFM</a> ClsInstEnv</li><li class="src short"><a href="#v:emptyInstEnv">emptyInstEnv</a> :: <a href="InstEnv.html#t:InstEnv">InstEnv</a></li><li class="src short"><a href="#v:extendInstEnv">extendInstEnv</a> :: <a href="InstEnv.html#t:InstEnv">InstEnv</a> -&gt; <a href="InstEnv.html#t:ClsInst">ClsInst</a> -&gt; <a href="InstEnv.html#t:InstEnv">InstEnv</a></li><li class="src short"><a href="#v:deleteFromInstEnv">deleteFromInstEnv</a> :: <a href="InstEnv.html#t:InstEnv">InstEnv</a> -&gt; <a href="InstEnv.html#t:ClsInst">ClsInst</a> -&gt; <a href="InstEnv.html#t:InstEnv">InstEnv</a></li><li class="src short"><a href="#v:identicalClsInstHead">identicalClsInstHead</a> :: <a href="InstEnv.html#t:ClsInst">ClsInst</a> -&gt; <a href="InstEnv.html#t:ClsInst">ClsInst</a> -&gt; <a href="../base-4.8.1.0/Data-Bool.html#t:Bool">Bool</a></li><li class="src short"><a href="#v:extendInstEnvList">extendInstEnvList</a> :: <a href="InstEnv.html#t:InstEnv">InstEnv</a> -&gt; [<a href="InstEnv.html#t:ClsInst">ClsInst</a>] -&gt; <a href="InstEnv.html#t:InstEnv">InstEnv</a></li><li class="src short"><a href="#v:lookupUniqueInstEnv">lookupUniqueInstEnv</a> :: <a href="InstEnv.html#t:InstEnvs">InstEnvs</a> -&gt; <a href="Class.html#t:Class">Class</a> -&gt; [<a href="Type.html#t:Type">Type</a>] -&gt; <a href="../base-4.8.1.0/Data-Either.html#t:Either">Either</a> <a href="ErrUtils.html#t:MsgDoc">MsgDoc</a> (<a href="InstEnv.html#t:ClsInst">ClsInst</a>, [<a href="Type.html#t:Type">Type</a>])</li><li class="src short"><a href="#v:lookupInstEnv-39-">lookupInstEnv'</a> :: <a href="InstEnv.html#t:InstEnv">InstEnv</a> -&gt; <a href="InstEnv.html#t:VisibleOrphanModules">VisibleOrphanModules</a> -&gt; <a href="Class.html#t:Class">Class</a> -&gt; [<a href="Type.html#t:Type">Type</a>] -&gt; ([<a href="InstEnv.html#t:InstMatch">InstMatch</a>], [<a href="InstEnv.html#t:ClsInst">ClsInst</a>])</li><li class="src short"><a href="#v:lookupInstEnv">lookupInstEnv</a> :: <a href="InstEnv.html#t:InstEnvs">InstEnvs</a> -&gt; <a href="Class.html#t:Class">Class</a> -&gt; [<a href="Type.html#t:Type">Type</a>] -&gt; <a href="InstEnv.html#t:ClsInstLookupResult">ClsInstLookupResult</a></li><li class="src short"><a href="#v:instEnvElts">instEnvElts</a> :: <a href="InstEnv.html#t:InstEnv">InstEnv</a> -&gt; [<a href="InstEnv.html#t:ClsInst">ClsInst</a>]</li><li class="src short"><a href="#v:memberInstEnv">memberInstEnv</a> :: <a href="InstEnv.html#t:InstEnv">InstEnv</a> -&gt; <a href="InstEnv.html#t:ClsInst">ClsInst</a> -&gt; <a href="../base-4.8.1.0/Data-Bool.html#t:Bool">Bool</a></li><li class="src short"><a href="#v:instIsVisible">instIsVisible</a> :: <a href="InstEnv.html#t:VisibleOrphanModules">VisibleOrphanModules</a> -&gt; <a href="InstEnv.html#t:ClsInst">ClsInst</a> -&gt; <a href="../base-4.8.1.0/Data-Bool.html#t:Bool">Bool</a></li><li class="src short"><a href="#v:classInstances">classInstances</a> :: <a href="InstEnv.html#t:InstEnvs">InstEnvs</a> -&gt; <a href="Class.html#t:Class">Class</a> -&gt; [<a href="InstEnv.html#t:ClsInst">ClsInst</a>]</li><li class="src short"><a href="#v:orphNamesOfClsInst">orphNamesOfClsInst</a> :: <a href="InstEnv.html#t:ClsInst">ClsInst</a> -&gt; <a href="NameSet.html#t:NameSet">NameSet</a></li><li class="src short"><a href="#v:instanceBindFun">instanceBindFun</a> :: <a href="Var.html#t:TyVar">TyVar</a> -&gt; <a href="Unify.html#t:BindFlag">BindFlag</a></li><li class="src short"><a href="#v:instanceCantMatch">instanceCantMatch</a> :: [<a href="../base-4.8.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Name.html#t:Name">Name</a>] -&gt; [<a href="../base-4.8.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Name.html#t:Name">Name</a>] -&gt; <a href="../base-4.8.1.0/Data-Bool.html#t:Bool">Bool</a></li><li class="src short"><a href="#v:roughMatchTcs">roughMatchTcs</a> :: [<a href="Type.html#t:Type">Type</a>] -&gt; [<a href="../base-4.8.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Name.html#t:Name">Name</a>]</li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:DFunId" class="def">DFunId</a> = <a href="Var.html#t:Id">Id</a> <a href="src/Var.html#DFunId" class="link">Source</a></p></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:InstMatch" class="def">InstMatch</a> = (<a href="InstEnv.html#t:ClsInst">ClsInst</a>, [<a href="InstEnv.html#t:DFunInstType">DFunInstType</a>]) <a href="src/InstEnv.html#InstMatch" class="link">Source</a></p></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:ClsInstLookupResult" class="def">ClsInstLookupResult</a> = ([<a href="InstEnv.html#t:InstMatch">InstMatch</a>], [<a href="InstEnv.html#t:ClsInst">ClsInst</a>], <a href="../base-4.8.1.0/Data-Bool.html#t:Bool">Bool</a>) <a href="src/InstEnv.html#ClsInstLookupResult" class="link">Source</a></p></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:OverlapFlag" class="def">OverlapFlag</a> <a href="src/BasicTypes.html#OverlapFlag" class="link">Source</a></p><div class="doc"><p>The semantics allowed for overlapping instances for a particular
 instance. See Note [Safe Haskell isSafeOverlap] (in <code><a href="InstEnv.html#v:lhs">lhs</a></code>) for a
 explanation of the <code><a href="InstEnv.html#v:isSafeOverlap">isSafeOverlap</a></code> field.</p><ul><li><code><a href="ApiAnnotation.html#v:AnnKeywordId">AnnKeywordId</a></code> :
      <code><a href="ApiAnnotation.html#v:AnnOpen">AnnOpen</a></code> <code>'{-# OVERLAPPABLE'</code> or
                              <code>'{-# OVERLAPPING'</code> or
                              <code>'{-# OVERLAPS'</code> or
                              <code>'{-# INCOHERENT'</code>,
      <code><a href="ApiAnnotation.html#v:AnnClose">AnnClose</a></code> <code>`#-}`</code>,</li></ul></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:OverlapFlag" class="def">OverlapFlag</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:overlapMode" class="def">overlapMode</a> :: <a href="InstEnv.html#t:OverlapMode">OverlapMode</a></dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:isSafeOverlap" class="def">isSafeOverlap</a> :: <a href="../base-4.8.1.0/Data-Bool.html#t:Bool">Bool</a></dt><dd class="doc empty">&nbsp;</dd></dl><div class="clear"></div></div></td></tr></table></div><div class="subs instances"><p id="control.i:OverlapFlag" class="caption collapser" onclick="toggleSection('i:OverlapFlag')">Instances</p><div id="section.i:OverlapFlag" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.1.0/Data-Eq.html#t:Eq">Eq</a> <a href="InstEnv.html#t:OverlapFlag">OverlapFlag</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.1.0/Data-Data.html#t:Data">Data</a> <a href="InstEnv.html#t:OverlapFlag">OverlapFlag</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Outputable.html#t:Outputable">Outputable</a> <a href="InstEnv.html#t:OverlapFlag">OverlapFlag</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Binary.html#t:Binary">Binary</a> <a href="InstEnv.html#t:OverlapFlag">OverlapFlag</a></span></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:OverlapMode" class="def">OverlapMode</a> <a href="src/BasicTypes.html#OverlapMode" class="link">Source</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:NoOverlap" class="def">NoOverlap</a> <a href="BasicTypes.html#t:SourceText">SourceText</a></td><td class="doc"><p>This instance must not overlap another <code><a href="InstEnv.html#v:NoOverlap">NoOverlap</a></code> instance.
 However, it may be overlapped by <code><a href="InstEnv.html#v:Overlapping">Overlapping</a></code> instances,
 and it may overlap <code><a href="InstEnv.html#v:Overlappable">Overlappable</a></code> instances.</p></td></tr><tr><td class="src"><a name="v:Overlappable" class="def">Overlappable</a> <a href="BasicTypes.html#t:SourceText">SourceText</a></td><td class="doc"><p>Silently ignore this instance if you find a
 more specific one that matches the constraint
 you are trying to resolve</p><p>Example: constraint (Foo [Int])
   instance                      Foo [Int]
   instance {-<a name=" OVERLAPPABLE "></a>-} Foo [a]</p><p>Since the second instance has the Overlappable flag,
 the first instance will be chosen (otherwise
 its ambiguous which to choose)</p></td></tr><tr><td class="src"><a name="v:Overlapping" class="def">Overlapping</a> <a href="BasicTypes.html#t:SourceText">SourceText</a></td><td class="doc"><p>Silently ignore any more general instances that may be
   used to solve the constraint.</p><p>Example: constraint (Foo [Int])
   instance {-<a name=" OVERLAPPING "></a>-} Foo [Int]
   instance                     Foo [a]</p><p>Since the first instance has the Overlapping flag,
 the second---more general---instance will be ignored (otherwise
 it is ambiguous which to choose)</p></td></tr><tr><td class="src"><a name="v:Overlaps" class="def">Overlaps</a> <a href="BasicTypes.html#t:SourceText">SourceText</a></td><td class="doc"><p>Equivalent to having both <code><a href="InstEnv.html#v:Overlapping">Overlapping</a></code> and <code><a href="InstEnv.html#v:Overlappable">Overlappable</a></code> flags.</p></td></tr><tr><td class="src"><a name="v:Incoherent" class="def">Incoherent</a> <a href="BasicTypes.html#t:SourceText">SourceText</a></td><td class="doc"><p>Behave like Overlappable and Overlapping, and in addition pick
 an an arbitrary one if there are multiple matching candidates, and
 don't worry about later instantiation</p><p>Example: constraint (Foo [b])
 instance {-# INCOHERENT -} Foo [Int]
 instance                   Foo [a]
 Without the Incoherent flag, we'd complain that
 instantiating <code>b</code> would change which instance
 was chosen. See also note [Incoherent instances] in InstEnv</p></td></tr></table></div><div class="subs instances"><p id="control.i:OverlapMode" class="caption collapser" onclick="toggleSection('i:OverlapMode')">Instances</p><div id="section.i:OverlapMode" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.1.0/Data-Eq.html#t:Eq">Eq</a> <a href="InstEnv.html#t:OverlapMode">OverlapMode</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.1.0/Data-Data.html#t:Data">Data</a> <a href="InstEnv.html#t:OverlapMode">OverlapMode</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Outputable.html#t:Outputable">Outputable</a> <a href="InstEnv.html#t:OverlapMode">OverlapMode</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Binary.html#t:Binary">Binary</a> <a href="InstEnv.html#t:OverlapMode">OverlapMode</a></span></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:setOverlapModeMaybe" class="def">setOverlapModeMaybe</a> :: <a href="InstEnv.html#t:OverlapFlag">OverlapFlag</a> -&gt; <a href="../base-4.8.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="InstEnv.html#t:OverlapMode">OverlapMode</a> -&gt; <a href="InstEnv.html#t:OverlapFlag">OverlapFlag</a> <a href="src/BasicTypes.html#setOverlapModeMaybe" class="link">Source</a></p></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:ClsInst" class="def">ClsInst</a> <a href="src/InstEnv.html#ClsInst" class="link">Source</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:ClsInst" class="def">ClsInst</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:is_cls_nm" class="def">is_cls_nm</a> :: <a href="Name.html#t:Name">Name</a></dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:is_tcs" class="def">is_tcs</a> :: [<a href="../base-4.8.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Name.html#t:Name">Name</a>]</dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:is_tvs" class="def">is_tvs</a> :: [<a href="Var.html#t:TyVar">TyVar</a>]</dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:is_cls" class="def">is_cls</a> :: <a href="Class.html#t:Class">Class</a></dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:is_tys" class="def">is_tys</a> :: [<a href="Type.html#t:Type">Type</a>]</dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:is_dfun" class="def">is_dfun</a> :: <a href="InstEnv.html#t:DFunId">DFunId</a></dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:is_flag" class="def">is_flag</a> :: <a href="InstEnv.html#t:OverlapFlag">OverlapFlag</a></dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:is_orphan" class="def">is_orphan</a> :: <a href="InstEnv.html#t:IsOrphan">IsOrphan</a></dt><dd class="doc empty">&nbsp;</dd></dl><div class="clear"></div></div></td></tr></table></div><div class="subs instances"><p id="control.i:ClsInst" class="caption collapser" onclick="toggleSection('i:ClsInst')">Instances</p><div id="section.i:ClsInst" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.1.0/Data-Data.html#t:Data">Data</a> <a href="InstEnv.html#t:ClsInst">ClsInst</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Outputable.html#t:Outputable">Outputable</a> <a href="InstEnv.html#t:ClsInst">ClsInst</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Name.html#t:NamedThing">NamedThing</a> <a href="InstEnv.html#t:ClsInst">ClsInst</a></span></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:DFunInstType" class="def">DFunInstType</a> = <a href="../base-4.8.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Type.html#t:Type">Type</a> <a href="src/InstEnv.html#DFunInstType" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:pprInstance" class="def">pprInstance</a> :: <a href="InstEnv.html#t:ClsInst">ClsInst</a> -&gt; <a href="Outputable.html#t:SDoc">SDoc</a> <a href="src/InstEnv.html#pprInstance" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:pprInstanceHdr" class="def">pprInstanceHdr</a> :: <a href="InstEnv.html#t:ClsInst">ClsInst</a> -&gt; <a href="Outputable.html#t:SDoc">SDoc</a> <a href="src/InstEnv.html#pprInstanceHdr" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:pprInstances" class="def">pprInstances</a> :: [<a href="InstEnv.html#t:ClsInst">ClsInst</a>] -&gt; <a href="Outputable.html#t:SDoc">SDoc</a> <a href="src/InstEnv.html#pprInstances" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:instanceHead" class="def">instanceHead</a> :: <a href="InstEnv.html#t:ClsInst">ClsInst</a> -&gt; ([<a href="Var.html#t:TyVar">TyVar</a>], <a href="Class.html#t:Class">Class</a>, [<a href="Type.html#t:Type">Type</a>]) <a href="src/InstEnv.html#instanceHead" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:instanceSig" class="def">instanceSig</a> :: <a href="InstEnv.html#t:ClsInst">ClsInst</a> -&gt; ([<a href="Var.html#t:TyVar">TyVar</a>], [<a href="Type.html#t:Type">Type</a>], <a href="Class.html#t:Class">Class</a>, [<a href="Type.html#t:Type">Type</a>]) <a href="src/InstEnv.html#instanceSig" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:mkLocalInstance" class="def">mkLocalInstance</a> :: <a href="InstEnv.html#t:DFunId">DFunId</a> -&gt; <a href="InstEnv.html#t:OverlapFlag">OverlapFlag</a> -&gt; [<a href="Var.html#t:TyVar">TyVar</a>] -&gt; <a href="Class.html#t:Class">Class</a> -&gt; [<a href="Type.html#t:Type">Type</a>] -&gt; <a href="InstEnv.html#t:ClsInst">ClsInst</a> <a href="src/InstEnv.html#mkLocalInstance" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:mkImportedInstance" class="def">mkImportedInstance</a> :: <a href="Name.html#t:Name">Name</a> -&gt; [<a href="../base-4.8.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Name.html#t:Name">Name</a>] -&gt; <a href="InstEnv.html#t:DFunId">DFunId</a> -&gt; <a href="InstEnv.html#t:OverlapFlag">OverlapFlag</a> -&gt; <a href="InstEnv.html#t:IsOrphan">IsOrphan</a> -&gt; <a href="InstEnv.html#t:ClsInst">ClsInst</a> <a href="src/InstEnv.html#mkImportedInstance" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:instanceDFunId" class="def">instanceDFunId</a> :: <a href="InstEnv.html#t:ClsInst">ClsInst</a> -&gt; <a href="InstEnv.html#t:DFunId">DFunId</a> <a href="src/InstEnv.html#instanceDFunId" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:tidyClsInstDFun" class="def">tidyClsInstDFun</a> :: (<a href="InstEnv.html#t:DFunId">DFunId</a> -&gt; <a href="InstEnv.html#t:DFunId">DFunId</a>) -&gt; <a href="InstEnv.html#t:ClsInst">ClsInst</a> -&gt; <a href="InstEnv.html#t:ClsInst">ClsInst</a> <a href="src/InstEnv.html#tidyClsInstDFun" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:instanceRoughTcs" class="def">instanceRoughTcs</a> :: <a href="InstEnv.html#t:ClsInst">ClsInst</a> -&gt; [<a href="../base-4.8.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Name.html#t:Name">Name</a>] <a href="src/InstEnv.html#instanceRoughTcs" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:fuzzyClsInstCmp" class="def">fuzzyClsInstCmp</a> :: <a href="InstEnv.html#t:ClsInst">ClsInst</a> -&gt; <a href="InstEnv.html#t:ClsInst">ClsInst</a> -&gt; <a href="../base-4.8.1.0/Data-Ord.html#t:Ordering">Ordering</a> <a href="src/InstEnv.html#fuzzyClsInstCmp" class="link">Source</a></p><div class="doc"><p>A fuzzy comparison function for class instances, intended for sorting
 instances before displaying them to the user.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:IsOrphan" class="def">IsOrphan</a> <a href="src/InstEnv.html#IsOrphan" class="link">Source</a></p><div class="doc"><p>Is this instance an orphan?  If it is not an orphan, contains an <code><a href="OccName.html#t:OccName">OccName</a></code>
 witnessing the instance's non-orphanhood.
 See Note [Orphans]</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:IsOrphan" class="def">IsOrphan</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a name="v:NotOrphan" class="def">NotOrphan</a> <a href="OccName.html#t:OccName">OccName</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:IsOrphan" class="caption collapser" onclick="toggleSection('i:IsOrphan')">Instances</p><div id="section.i:IsOrphan" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.1.0/Data-Data.html#t:Data">Data</a> <a href="InstEnv.html#t:IsOrphan">IsOrphan</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Binary.html#t:Binary">Binary</a> <a href="InstEnv.html#t:IsOrphan">IsOrphan</a></span></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:isOrphan" class="def">isOrphan</a> :: <a href="InstEnv.html#t:IsOrphan">IsOrphan</a> -&gt; <a href="../base-4.8.1.0/Data-Bool.html#t:Bool">Bool</a> <a href="src/InstEnv.html#isOrphan" class="link">Source</a></p><div class="doc"><p>Returns true if <code><a href="InstEnv.html#t:IsOrphan">IsOrphan</a></code> is orphan.</p></div></div><div class="top"><p class="src"><a name="v:notOrphan" class="def">notOrphan</a> :: <a href="InstEnv.html#t:IsOrphan">IsOrphan</a> -&gt; <a href="../base-4.8.1.0/Data-Bool.html#t:Bool">Bool</a> <a href="src/InstEnv.html#notOrphan" class="link">Source</a></p><div class="doc"><p>Returns true if <code><a href="InstEnv.html#t:IsOrphan">IsOrphan</a></code> is not an orphan.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:InstEnvs" class="def">InstEnvs</a> <a href="src/InstEnv.html#InstEnvs" class="link">Source</a></p><div class="doc"><p><code><a href="InstEnv.html#t:InstEnvs">InstEnvs</a></code> represents the combination of the global type class instance
 environment, the local type class instance environment, and the set of
 transitively reachable orphan modules (according to what modules have been
 directly imported) used to test orphan instance visibility.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:InstEnvs" class="def">InstEnvs</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:ie_global" class="def">ie_global</a> :: <a href="InstEnv.html#t:InstEnv">InstEnv</a></dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:ie_local" class="def">ie_local</a> :: <a href="InstEnv.html#t:InstEnv">InstEnv</a></dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:ie_visible" class="def">ie_visible</a> :: <a href="InstEnv.html#t:VisibleOrphanModules">VisibleOrphanModules</a></dt><dd class="doc empty">&nbsp;</dd></dl><div class="clear"></div></div></td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:VisibleOrphanModules" class="def">VisibleOrphanModules</a> = <a href="Module.html#t:ModuleSet">ModuleSet</a> <a href="src/InstEnv.html#VisibleOrphanModules" class="link">Source</a></p><div class="doc"><p>Set of visible orphan modules, according to what modules have been directly
 imported.  This is based off of the dep_orphs field, which records
 transitively reachable orphan modules (modules that define orphan instances).</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:InstEnv" class="def">InstEnv</a> = <a href="UniqFM.html#t:UniqFM">UniqFM</a> ClsInstEnv <a href="src/InstEnv.html#InstEnv" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:emptyInstEnv" class="def">emptyInstEnv</a> :: <a href="InstEnv.html#t:InstEnv">InstEnv</a> <a href="src/InstEnv.html#emptyInstEnv" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:extendInstEnv" class="def">extendInstEnv</a> :: <a href="InstEnv.html#t:InstEnv">InstEnv</a> -&gt; <a href="InstEnv.html#t:ClsInst">ClsInst</a> -&gt; <a href="InstEnv.html#t:InstEnv">InstEnv</a> <a href="src/InstEnv.html#extendInstEnv" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:deleteFromInstEnv" class="def">deleteFromInstEnv</a> :: <a href="InstEnv.html#t:InstEnv">InstEnv</a> -&gt; <a href="InstEnv.html#t:ClsInst">ClsInst</a> -&gt; <a href="InstEnv.html#t:InstEnv">InstEnv</a> <a href="src/InstEnv.html#deleteFromInstEnv" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:identicalClsInstHead" class="def">identicalClsInstHead</a> :: <a href="InstEnv.html#t:ClsInst">ClsInst</a> -&gt; <a href="InstEnv.html#t:ClsInst">ClsInst</a> -&gt; <a href="../base-4.8.1.0/Data-Bool.html#t:Bool">Bool</a> <a href="src/InstEnv.html#identicalClsInstHead" class="link">Source</a></p><div class="doc"><p>True when when the instance heads are the same
 e.g.  both are   Eq [(a,b)]
 Used for overriding in GHCi
 Obviously should be insenstive to alpha-renaming</p></div></div><div class="top"><p class="src"><a name="v:extendInstEnvList" class="def">extendInstEnvList</a> :: <a href="InstEnv.html#t:InstEnv">InstEnv</a> -&gt; [<a href="InstEnv.html#t:ClsInst">ClsInst</a>] -&gt; <a href="InstEnv.html#t:InstEnv">InstEnv</a> <a href="src/InstEnv.html#extendInstEnvList" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:lookupUniqueInstEnv" class="def">lookupUniqueInstEnv</a> :: <a href="InstEnv.html#t:InstEnvs">InstEnvs</a> -&gt; <a href="Class.html#t:Class">Class</a> -&gt; [<a href="Type.html#t:Type">Type</a>] -&gt; <a href="../base-4.8.1.0/Data-Either.html#t:Either">Either</a> <a href="ErrUtils.html#t:MsgDoc">MsgDoc</a> (<a href="InstEnv.html#t:ClsInst">ClsInst</a>, [<a href="Type.html#t:Type">Type</a>]) <a href="src/InstEnv.html#lookupUniqueInstEnv" class="link">Source</a></p><div class="doc"><p>Look up an instance in the given instance environment. The given class application must match exactly
 one instance and the match may not contain any flexi type variables.  If the lookup is unsuccessful,
 yield 'Left errorMessage'.</p></div></div><div class="top"><p class="src"><a name="v:lookupInstEnv-39-" class="def">lookupInstEnv'</a> :: <a href="InstEnv.html#t:InstEnv">InstEnv</a> -&gt; <a href="InstEnv.html#t:VisibleOrphanModules">VisibleOrphanModules</a> -&gt; <a href="Class.html#t:Class">Class</a> -&gt; [<a href="Type.html#t:Type">Type</a>] -&gt; ([<a href="InstEnv.html#t:InstMatch">InstMatch</a>], [<a href="InstEnv.html#t:ClsInst">ClsInst</a>]) <a href="src/InstEnv.html#lookupInstEnv%27" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:lookupInstEnv" class="def">lookupInstEnv</a> :: <a href="InstEnv.html#t:InstEnvs">InstEnvs</a> -&gt; <a href="Class.html#t:Class">Class</a> -&gt; [<a href="Type.html#t:Type">Type</a>] -&gt; <a href="InstEnv.html#t:ClsInstLookupResult">ClsInstLookupResult</a> <a href="src/InstEnv.html#lookupInstEnv" class="link">Source</a></p><div class="doc"><p>See Note [Rules for instance lookup]</p></div></div><div class="top"><p class="src"><a name="v:instEnvElts" class="def">instEnvElts</a> :: <a href="InstEnv.html#t:InstEnv">InstEnv</a> -&gt; [<a href="InstEnv.html#t:ClsInst">ClsInst</a>] <a href="src/InstEnv.html#instEnvElts" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:memberInstEnv" class="def">memberInstEnv</a> :: <a href="InstEnv.html#t:InstEnv">InstEnv</a> -&gt; <a href="InstEnv.html#t:ClsInst">ClsInst</a> -&gt; <a href="../base-4.8.1.0/Data-Bool.html#t:Bool">Bool</a> <a href="src/InstEnv.html#memberInstEnv" class="link">Source</a></p><div class="doc"><p>Checks for an exact match of ClsInst in the instance environment.
 We use this when we do signature checking in TcRnDriver</p></div></div><div class="top"><p class="src"><a name="v:instIsVisible" class="def">instIsVisible</a> :: <a href="InstEnv.html#t:VisibleOrphanModules">VisibleOrphanModules</a> -&gt; <a href="InstEnv.html#t:ClsInst">ClsInst</a> -&gt; <a href="../base-4.8.1.0/Data-Bool.html#t:Bool">Bool</a> <a href="src/InstEnv.html#instIsVisible" class="link">Source</a></p><div class="doc"><p>Test if an instance is visible, by checking that its origin module
 is in <code><a href="InstEnv.html#t:VisibleOrphanModules">VisibleOrphanModules</a></code>.
 See Note [Instance lookup and orphan instances]</p></div></div><div class="top"><p class="src"><a name="v:classInstances" class="def">classInstances</a> :: <a href="InstEnv.html#t:InstEnvs">InstEnvs</a> -&gt; <a href="Class.html#t:Class">Class</a> -&gt; [<a href="InstEnv.html#t:ClsInst">ClsInst</a>] <a href="src/InstEnv.html#classInstances" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:orphNamesOfClsInst" class="def">orphNamesOfClsInst</a> :: <a href="InstEnv.html#t:ClsInst">ClsInst</a> -&gt; <a href="NameSet.html#t:NameSet">NameSet</a> <a href="src/InstEnv.html#orphNamesOfClsInst" class="link">Source</a></p><div class="doc"><p>Collects the names of concrete types and type constructors that make
 up the head of a class instance. For instance, given `class Foo a b`:</p><p>`instance Foo (Either (Maybe Int) a) Bool` would yield
      [Either, Maybe, Int, Bool]</p><p>Used in the implementation of &quot;:info&quot; in GHCi.</p></div></div><div class="top"><p class="src"><a name="v:instanceBindFun" class="def">instanceBindFun</a> :: <a href="Var.html#t:TyVar">TyVar</a> -&gt; <a href="Unify.html#t:BindFlag">BindFlag</a> <a href="src/InstEnv.html#instanceBindFun" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:instanceCantMatch" class="def">instanceCantMatch</a> :: [<a href="../base-4.8.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Name.html#t:Name">Name</a>] -&gt; [<a href="../base-4.8.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Name.html#t:Name">Name</a>] -&gt; <a href="../base-4.8.1.0/Data-Bool.html#t:Bool">Bool</a> <a href="src/InstEnv.html#instanceCantMatch" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:roughMatchTcs" class="def">roughMatchTcs</a> :: [<a href="Type.html#t:Type">Type</a>] -&gt; [<a href="../base-4.8.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Name.html#t:Name">Name</a>] <a href="src/InstEnv.html#roughMatchTcs" class="link">Source</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.16.1</p></div></body></html>